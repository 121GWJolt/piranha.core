piranha.siteedit=new Vue({el:"#siteedit",data:{loading:!0,id:null,typeId:null,title:null,internalId:null,culture:null,description:null,hostnames:null,isDefault:!1,siteTypes:[],callback:null},methods:{load:function(t){self=this,fetch(piranha.baseUrl+"manager/api/site/"+t).then(function(t){return t.json()}).then(function(t){self.id=t.id,self.typeId=t.typeId,self.title=t.title,self.internalId=t.internalId,self.culture=t.culture,self.description=t.description,self.hostnames=t.hostnames,self.isDefault=t.isDefault,self.siteTypes=t.siteTypes}).catch(function(t){console.log("error:",t)})},save:function(){var e=this,t={id:this.id,typeId:this.typeId,title:this.title,internalId:this.internalId,culture:this.culture,description:this.description,hostnames:this.hostnames,isDefault:this.isDefault};fetch(piranha.baseUrl+"manager/api/site/save",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then(function(t){return t.json()}).then(function(t){piranha.notifications.push(t),"success"===t.type&&($("#siteedit").modal("hide"),e.callback&&(e.callback(),e.callback=null))}).catch(function(t){console.log("error:",t)})},open:function(t,e){this.callback=e,this.load(t),$("#siteedit").modal("show"),$("#sitetitle").focus()}},updated:function(){this.loading=!1}}),$("#siteedit").on("shown.bs.modal",function(){$("#sitetitle").trigger("focus")});