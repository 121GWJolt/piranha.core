piranha.media=new Vue({el:"#media",data:{currentFolderId:null,parentFolderId:null,folders:[],items:[],folder:{name:null}},methods:{load:function(e){fetch(piranha.baseUrl+"manager/api/media/list"+(e?"/"+e:"")).then(function(e){return e.json()}).then(function(e){piranha.media.currentFolderId=e.currentFolderId,piranha.media.parentFolderId=e.parentFolderId,piranha.media.folders=e.folders,piranha.media.items=e.media}).catch(function(e){console.log("error:",e)})},savefolder:function(){fetch(piranha.baseUrl+"manager/api/media/savefolder",{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify({parentId:piranha.media.currentFolderId,name:piranha.media.folder.name})}).then(function(e){return e.json()}).then(function(e){"success"===e.status.type&&($("#mediaFolderModal").modal("hide"),piranha.media.folder.name=null,piranha.media.folders=e.folders,piranha.media.items=e.media),piranha.notifications.push(e.status)}).catch(function(e){console.log("error:",e)})},remove:function(e){console.log("Remove media: ",e)}},created:function(){this.load()}});